
# ğŸ“„ ANSP_back æ¥å£æ–‡æ¡£

---

## ğŸ§© 1. é¡¹ç›®æ¦‚è¿°

`ANSP_back` æ˜¯ä¸€ä¸ªç”¨äºå¤„ç† Excel æ–‡ä»¶å¹¶ç”Ÿæˆåˆ†æç»“æœçš„åç«¯æœåŠ¡ã€‚æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- âœ… Excel æ–‡ä»¶ä¸Šä¼ ä¸å¤„ç†
- ğŸ“Š åˆ†æç»“æœæŸ¥è¯¢
- ğŸ“ æ–‡ä»¶ä¸å›¾åƒä¸‹è½½

---

## ğŸ“š 2. æ¥å£åˆ—è¡¨

### ğŸ” 2.1 æ¸…å•åˆ†ææ¥å£

- **æ¥å£åœ°å€**ï¼š`POST /process_qdfx`

#### ğŸ“¥ è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | æ˜¯å¦å¿…å¡« | æè¿° |
|--------|------|----------|------|
| `file` | file | âœ… æ˜¯     | ä¸Šä¼ çš„ Excel æ–‡ä»¶ï¼ˆ`.xlsx` æˆ– `.xls`ï¼‰ |

#### ğŸ“¤ è¿”å›ç»“æœ

| çŠ¶æ€ç  | è¿”å›ç¤ºä¾‹ | æè¿° |
|--------|----------|------|
| `200` | `{"message": "File processed successfully", "output_file": "output.xlsx"}` | æ–‡ä»¶å¤„ç†æˆåŠŸ |
| `400` | `{"error": "No file part"}` | è¯·æ±‚æœªåŒ…å«æ–‡ä»¶ |
| `400` | `{"error": "No selected file"}` | æ–‡ä»¶æœªè¢«é€‰ä¸­ |
| `400` | `{"error": "Invalid file type"}` | æ–‡ä»¶ç±»å‹ä¸æ”¯æŒ |
| `400` | `{"error": "Missing required columns in the Excel file"}` | ç¼ºå°‘å¿…è¦åˆ— |
| `500` | `{"error": "..."}` | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

#### ğŸ“Œ ç¤ºä¾‹è¯·æ±‚

```http
POST /process_qdfx
Content-Type: multipart/form-data

file: (Excel æ–‡ä»¶å†…å®¹)
```

#### ğŸ“Œ ç¤ºä¾‹å“åº”

```json
{
  "message": "File processed successfully",
  "output_file": "output.xlsx"
}
```

---

### ğŸ§­ 2.2 é‡å¿ƒåˆ†ææ¥å£

- **æ¥å£åœ°å€**ï¼š`POST /process_szc`

#### ğŸ“¥ è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | æ˜¯å¦å¿…å¡« | æè¿° |
|--------|------|----------|------|
| `file` | file | âœ… æ˜¯     | Excel æ–‡ä»¶ï¼ˆ`.xlsx` æˆ– `.xls`ï¼‰ |

#### ğŸ“¤ è¿”å›ç»“æœ

| çŠ¶æ€ç  | è¿”å›ç¤ºä¾‹ | æè¿° |
|--------|----------|------|
| `200` | `{"message": "File uploaded successfully"}` | ä¸Šä¼ æˆåŠŸ |
| `400` | `{"error": "No file part"}` | ç¼ºå°‘æ–‡ä»¶éƒ¨åˆ† |
| `400` | `{"error": "No selected file"}` | æœªé€‰æ‹©æ–‡ä»¶ |
| `400` | `{"error": "Invalid file type"}` | ç±»å‹é”™è¯¯ |

#### ğŸ“Œ ç¤ºä¾‹è¯·æ±‚

```http
POST /process_szc
Content-Type: multipart/form-data

file: (Excel æ–‡ä»¶å†…å®¹)
```

#### ğŸ“Œ ç¤ºä¾‹å“åº”

```json
{
  "message": "File uploaded successfully"
}
```

---

### ğŸ” 2.3 è¿ç§»åˆ†ææ¥å£

- **æ¥å£åœ°å€**ï¼š`POST /process_mzc`

#### ğŸ“¥ è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | æ˜¯å¦å¿…å¡« | æè¿° |
|--------|------|----------|------|
| `files` | file | âœ… æ˜¯     | å¤šä¸ª Excel æ–‡ä»¶ä¸Šä¼  |

#### ğŸ“¤ è¿”å›ç»“æœ

| çŠ¶æ€ç  | è¿”å›ç¤ºä¾‹ | æè¿° |
|--------|----------|------|
| `200` | `{"message": "Files uploaded successfully!", "files": [...]}` | ä¸Šä¼ æˆåŠŸ |
| `400` | `{"error": "No file part"}` | æœªä¸Šä¼ å†…å®¹ |
| `400` | `{"error": "No selected files"}` | æœªé€‰æ‹©ä»»ä½•æ–‡ä»¶ |
| `400` | `{"error": "Invalid file type for file <filename>"}` | æŸæ–‡ä»¶æ ¼å¼é”™è¯¯ |

#### ğŸ“Œ ç¤ºä¾‹è¯·æ±‚

```http
POST /process_mzc
Content-Type: multipart/form-data

files: (å¤šä¸ª Excel æ–‡ä»¶)
```

#### ğŸ“Œ ç¤ºä¾‹å“åº”

```json
{
  "message": "Files uploaded successfully!",
  "files": [
    {"filename": "output1.xlsx", "path": "/path/to/output1.xlsx"},
    {"filename": "output2.xlsx", "path": "/path/to/output2.xlsx"}
  ]
}
```

---

### ğŸ“ 2.4 æ–‡ä»¶ä¸‹è½½

- **æ¥å£åœ°å€**ï¼š`GET /download/<filename>`

#### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | æ˜¯å¦å¿…å¡« | æè¿° |
|--------|------|----------|------|
| `filename` | string | âœ… æ˜¯ | æ–‡ä»¶åï¼ˆå¦‚ `output.xlsx`ï¼‰ |

#### è¿”å›ç»“æœ

| çŠ¶æ€ç  | æè¿° |
|--------|------|
| `200` | æ–‡ä»¶ä¸‹è½½æˆåŠŸï¼ˆé™„ä»¶ï¼‰ |
| `404` | æ–‡ä»¶æœªæ‰¾åˆ° |

#### ç¤ºä¾‹è¯·æ±‚

```http
GET /download/output.xlsx
```

---

### ğŸ” 2.5 æŸ¥è¯¢åˆ†æç»“æœ

- **æ¥å£åœ°å€**ï¼š`GET /get_result/<filename>`

#### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | æ˜¯å¦å¿…å¡« | æè¿° |
|--------|------|----------|------|
| `filename` | string | âœ… æ˜¯ | è¦æŸ¥è¯¢çš„åˆ†æç»“æœæ–‡ä»¶å |

#### è¿”å›ç»“æœ

| çŠ¶æ€ç  | è¿”å›å†…å®¹ |
|--------|----------|
| `200` | JSON æ ¼å¼ç»“æœ |
| `500` | æœåŠ¡å™¨é”™è¯¯ |

#### ç¤ºä¾‹å“åº”

```json
[
  {"tn": 1.0, "tp": 2.0, "tc": 3.0, "tf": 4.0, "area": 5.0, "intensity": 0.1},
  {"tn": 6.0, "tp": 7.0, "tc": 8.0, "tf": 9.0, "area": 10.0, "intensity": 0.2}
]
```

---

### ğŸ–¼ï¸ 2.6 è·å–å›¾ç‰‡

- **æ¥å£åœ°å€**ï¼š`GET /get_image/<filename>`

| å‚æ•°å | ç±»å‹ | æ˜¯å¦å¿…å¡« | æè¿° |
|--------|------|----------|------|
| `filename` | string | âœ… æ˜¯ | å›¾åƒæ–‡ä»¶åï¼ˆå¦‚ `szc_fig.jpeg`ï¼‰ |

---

### ğŸ–¼ï¸ 2.7 è·å–è¿ç§»åˆ†æå›¾ç‰‡

- **æ¥å£åœ°å€**ï¼š`GET /mzc_image`

æ— éœ€å‚æ•°ï¼Œè¿”å›åˆ†æå›¾åƒã€‚

---

### ğŸ–¼ï¸ 2.8 è·å–é‡å¿ƒåˆ†æå›¾ç‰‡

- **æ¥å£åœ°å€**ï¼š`GET /szc_image`

æ— éœ€å‚æ•°ï¼Œè¿”å›å›¾åƒã€‚

---

## âš ï¸ 3. é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | å«ä¹‰ |
|--------|------|
| `400` | è¯·æ±‚å‚æ•°é”™è¯¯æˆ–ç¼ºå¤± |
| `404` | æ–‡ä»¶æœªæ‰¾åˆ° |
| `500` | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

## ğŸ“Œ 4. é™„åŠ è¯´æ˜

- æ‰€æœ‰æ¥å£æ”¯æŒ **è·¨åŸŸè¯·æ±‚ï¼ˆCORSï¼‰**
- æ–‡ä»¶ä¸Šä¼ é¡»ä½¿ç”¨ `multipart/form-data` ç¼–ç 
